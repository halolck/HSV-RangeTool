# HSV Range Tool

**[➡️ ツールをすぐに試す](https://halolck.github.io/HSV-RangeTool/)**

画像中から特定の色のHSV（色相・彩度・明度）の範囲を、対話的に見つけて調整するためのWebアプリケーションです。OpenCVなどの画像処理ライブラリで使う色範囲のしきい値を決める作業を、直感的かつ効率的に行えます。

*(この部分は、実際にツールを公開した後にスクリーンショット画像に差し替えてください)*

\<br\>

## ✨ 主な機能

  * **多彩な画像読み込み**: ファイル選択、ドラッグ＆ドロップ、クリップボードからの画像ペースト（`Ctrl+V`）に対応。
  * **インタラクティブな範囲調整**: スライダーを動かすと、リアルタイムでマスク画像が更新されます。
  * **高機能スポイト**:
      * 画像上のピクセルを直接クリックして、その色を基準にHSV範囲を自動設定。
      * マウスカーソル周辺を拡大表示し、ピクセル単位での正確な色選択をサポート。
      * スポイトのHSVサンプリング範囲（H, S, Vそれぞれ±何段階か）を細かくカスタマイズ可能。
  * **複数範囲の管理**:
      * 複数のHSV範囲をリストとして保存し、それらをすべて含むマスクを生成可能。
      * 「赤色」と「濃い赤色」のように、少し異なる複数の色範囲をまとめて一つのマスクとして扱えます。
  * **カスタムフォーマットコピー**:
      * 決定したHSV範囲（下限値と上限値）を、指定したフォーマットでクリップボードにコピーできます。
      * Pythonのリスト形式 `low = [H, S, V]`, `up = [H, S, V]` など、自分の用途に合わせてテンプレートを編集可能。
  * **便利なUI**:
      * 画像のズームイン・ズームアウト、複数画像のナビゲーション機能を搭載。
      * コントロールパネルの幅はドラッグで自由に調整できます。

\<br\>

## 🚀 使い方

### 1\. 画像の読み込み

以下のいずれかの方法で画像を開きます。

  - **ファイル選択**: 左上のパネルをクリックして画像ファイルを選択します。
  - **ドラッグ＆ドロップ**: 左上のパネルに画像ファイルを直接ドラッグ＆ドロップします。
  - **ペースト**: クリップボードにコピーした画像（スクリーンショットなど）を `Ctrl+V` で貼り付けます。

複数枚の画像を読み込むと、プレビューパネルの下にナビゲーションボタンが表示され、画像を切り替えられます。

-----

### 2\. HSV範囲の調整

マスクしたい色がプレビュー画面に表示されるように、HSVの範囲を調整します。

#### **方法A: スライダーで調整する**

  - **`Low`**: マスクする色のHSV下限値です。
  - **`Upper`**: マスクする色のHSV上限値です。
  - 各スライダーを動かすと、マスク画像がリアルタイムで更新されます。
  - スライダーの数値をダブルクリックすると、直接数値を入力できます。

#### **方法B: スポイトツールを使う (推奨)**

1.  色のプレビューエリアにある **スポイトボタン** をクリックします。
2.  画像プレビュー上にマウスカーソルを移動します。
      - カーソル周辺が拡大表示され、現在のピクセルのHSV値が確認できます。
      - `矢印キー` でカーソルを1ピクセルずつ動かせます。
3.  目的の色の上で **クリック** するか、`スペース`キー を押します。
4.  クリックした色を中心に、設定で決められた範囲でHSVの`Low`/`Upper`スライダーが自動的に設定されます。
      - スポイトをキャンセルしたい場合は、`Esc`キーを押すか、プレビュー領域外をクリックします。

-----

### 3\. 複数の範囲を管理する

1.  スライダーで目的の範囲を一つ決定したら、`Add Current` ボタンを押します。
2.  現在のHSV範囲が下の`Saved Ranges`リストに追加されます。
3.  別の色を見つけるために、再度スポイトやスライダーで新しい範囲を調整します。
4.  マスク画像は、**現在のスライダーの範囲**と、**リストに保存されたすべての範囲**を合算した（含む）領域で生成されます。
5.  リストから範囲を削除したい場合は、リスト内の項目を選択して `Delete Selected` ボタンを押します。

-----

### 4\. 値をコピーする

`Copy Values` ボタンをクリックすると、最終的に決定したHSVの範囲がクリップボードにコピーされます。

  - **コピーされる値**: 現在のスライダーの値と`Saved Ranges`リストにあるすべての範囲を包含する、最も広い一つのHSV範囲（下限と上限）がコピーされます。
  - **フォーマットの変更**: 右上の **歯車アイコン⚙** から設定を開き、`Copy Format Template` を編集することで、コピーされるテキストの形式を自由に変更できます。

\<br\>

## ⚙️ 設定

画面右上の **歯車アイコン⚙** から、以下の設定を変更できます。

  - **Individual Range Controls**: スポイトで色を取得する際の範囲を、HSVで個別に設定するか、全チャンネルで統一した値にするかを切り替えます。
  - **Live Filter Preview**: スポイトツールで色を選択中に、リアルタイムでマスクプレビューを更新するかどうかを設定します。
  - **Copy Format Template**: `Copy Values`ボタンでコピーされるテキストのテンプレートを編集します。以下のプレースホルダーが使用できます。
      - `{Low_H}`, `{Low_S}`, `{Low_V}`: HSV下限値
      - `{Up_H}`, `{Up_S}`, `{Up_V}`: HSV上限値
